{"expireTime":9007200815366030000,"key":"transformer-remark-markdown-html-ad37e0a45fbb6dce35920bdde0c2aab9-gatsby-remark-katexgatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-autolink-headersgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":"<h3 id=\"learning-r-part-6\"><a href=\"#learning-r-part-6\" aria-label=\"learning r part 6 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Learning R Part 6</h3>\n<p>Part 6. Oh god. This language. Let it be over. Well this is working with enviroments which will be useful for my data science classes. Iâ€™m gonna dive right in.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> library<span class=\"token punctuation\">(</span>pryr<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> parenvs<span class=\"token punctuation\">(</span>all <span class=\"token operator\">=</span> True<span class=\"token punctuation\">)</span>\nError<span class=\"token operator\">:</span> object <span class=\"token string\">'True'</span> not found\n<span class=\"token operator\">></span> parenvs<span class=\"token punctuation\">(</span>all <span class=\"token operator\">=</span> T<span class=\"token punctuation\">)</span>\n   label                            name               \n<span class=\"token number\">1</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>       <span class=\"token string\">\"\"</span>                 \n<span class=\"token number\">2</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>pryr<span class=\"token operator\">></span>      <span class=\"token string\">\"package:pryr\"</span>     \n<span class=\"token number\">3</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>stats<span class=\"token operator\">></span>     <span class=\"token string\">\"package:stats\"</span>    \n<span class=\"token number\">4</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>graphics<span class=\"token operator\">></span>  <span class=\"token string\">\"package:graphics\"</span> \n<span class=\"token number\">5</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>grDevices<span class=\"token operator\">></span> <span class=\"token string\">\"package:grDevices\"</span>\n<span class=\"token number\">6</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>utils<span class=\"token operator\">></span>     <span class=\"token string\">\"package:utils\"</span>    \n<span class=\"token number\">7</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>datasets<span class=\"token operator\">></span>  <span class=\"token string\">\"package:datasets\"</span> \n<span class=\"token number\">8</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>methods<span class=\"token operator\">></span>   <span class=\"token string\">\"package:methods\"</span>  \n<span class=\"token number\">9</span>  <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> <span class=\"token number\">0x7f9a81097d78</span><span class=\"token operator\">></span>    <span class=\"token string\">\"Autoloads\"</span>        \n<span class=\"token number\">10</span> <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> base<span class=\"token operator\">></span>              <span class=\"token string\">\"\"</span>                 \n<span class=\"token number\">11</span> <span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_EmptyEnv<span class=\"token operator\">></span>        <span class=\"token string\">\"\"</span>                 \n<span class=\"token operator\">></span> as.environment<span class=\"token punctuation\">(</span><span class=\"token string\">\"package:stats\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>stats<span class=\"token operator\">></span>\nattr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"package:stats\"</span>\nattr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"/usr/local/Cellar/r/3.3.2/R.framework/Versions/3.3/Resources/library/stats\"</span>\n<span class=\"token operator\">></span> globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> baseenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> base<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> emptyenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_EmptyEnv<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> parent.env<span class=\"token punctuation\">(</span>emptyenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nError <span class=\"token keyword\">in</span> parent.env<span class=\"token punctuation\">(</span>emptyenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> the empty environment has no parent\n<span class=\"token operator\">></span> parent.env<span class=\"token punctuation\">(</span>globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> package<span class=\"token operator\">:</span>pryr<span class=\"token operator\">></span>\nattr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"package:pryr\"</span>\nattr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"/usr/local/lib/R/3.3/site-library/pryr\"</span>\n<span class=\"token operator\">></span> ls<span class=\"token punctuation\">(</span>globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ncharacter<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> ls<span class=\"token punctuation\">(</span>baseenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>A BUNCH O THINGS<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> </code></pre></div>\n<p>Okay so basically all these different environments are what variables we have access to. The next part is about adding variables to different enviroments.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> assign<span class=\"token punctuation\">(</span><span class=\"token string\">\"new\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Hello Global\"</span><span class=\"token punctuation\">,</span> envir <span class=\"token operator\">=</span> globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>new\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"Hello Global\"</span>\n<span class=\"token operator\">></span> globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> ls<span class=\"token punctuation\">(</span>globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token string\">\"new\"</span>\n<span class=\"token operator\">></span> show_env <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tlist<span class=\"token punctuation\">(</span>ran.<span class=\"token keyword\">in</span> <span class=\"token operator\">=</span> environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tparent <span class=\"token operator\">=</span> parent.env<span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\tobjects <span class=\"token operator\">=</span> ls.str<span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span> show_env<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">$</span>ran.<span class=\"token keyword\">in</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> <span class=\"token number\">0x7f9a871564d8</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>parent\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>objects\n\n<span class=\"token operator\">></span> show_env<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">$</span>ran.<span class=\"token keyword\">in</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> <span class=\"token number\">0x7f9a871611c8</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>parent\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>objects\n\n<span class=\"token operator\">></span> </code></pre></div>\n<p>So we can add variables to an environment, which is kinda cool. Whatâ€™s really annoying is that the enviromnment changes every time the function is called. It looks like itâ€™s gonna get more annoying.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span>  show_env <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">=</span> <span class=\"token string\">\"something\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  \tlist<span class=\"token punctuation\">(</span>ran.<span class=\"token keyword\">in</span> <span class=\"token operator\">=</span> environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  \tparent <span class=\"token operator\">=</span> parent.env<span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  \tobjects <span class=\"token operator\">=</span> ls.str<span class=\"token punctuation\">(</span>environment<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  \t<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span> show_env<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">$</span>ran.<span class=\"token keyword\">in</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> <span class=\"token number\">0x7f9a8722adb8</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>parent\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>objects\nx <span class=\"token operator\">:</span>  chr <span class=\"token string\">\"something\"</span>\n\n<span class=\"token operator\">></span> show_env<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token string\">\"something else\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">$</span>ran.<span class=\"token keyword\">in</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> <span class=\"token number\">0x7f9a86047778</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>parent\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> R_GlobalEnv<span class=\"token operator\">></span>\n\n<span class=\"token operator\">$</span>objects\nx <span class=\"token operator\">:</span>  chr <span class=\"token string\">\"something else\"</span>\n\n<span class=\"token operator\">></span> setup <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>deck<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \tDECK <span class=\"token operator\">&lt;-</span> deck\n\n  \tDEAL <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \t\tcard <span class=\"token operator\">&lt;-</span> deck<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span>\n  \t\tassign<span class=\"token punctuation\">(</span><span class=\"token string\">\"deck\"</span><span class=\"token punctuation\">,</span> deck<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1.</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> envir<span class=\"token operator\">=</span>globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  \t\tcard\n  \t<span class=\"token punctuation\">}</span>\n\n  \tSHUFFLE <span class=\"token operator\">&lt;-</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  \t\trandom <span class=\"token operator\">&lt;-</span> sample<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">52</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">52</span><span class=\"token punctuation\">)</span>\n  \t\tassign<span class=\"token punctuation\">(</span><span class=\"token string\">\"deck\"</span><span class=\"token punctuation\">,</span> DECK<span class=\"token punctuation\">[</span>random<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> envir<span class=\"token operator\">=</span> globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  \t<span class=\"token punctuation\">}</span>\n\n  \tlist<span class=\"token punctuation\">(</span>deal <span class=\"token operator\">=</span> DEAL<span class=\"token punctuation\">,</span> shuffle <span class=\"token operator\">=</span> SHUFFLE<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span> deck <span class=\"token operator\">&lt;-</span> read.table<span class=\"token punctuation\">(</span><span class=\"token string\">\"/Users/jea/Documents/Code/R-lang/deck.csv\"</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">,</span> sep <span class=\"token operator\">=</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> cards <span class=\"token operator\">&lt;-</span> setup<span class=\"token punctuation\">(</span>deck<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> deal <span class=\"token operator\">&lt;-</span> cards<span class=\"token operator\">$</span>deal\n<span class=\"token operator\">></span> shuffle <span class=\"token operator\">&lt;-</span> cards<span class=\"token operator\">$</span>shuffle\n<span class=\"token operator\">></span> deal\n<span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\ncard <span class=\"token operator\">&lt;-</span> deck<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span>\nassign<span class=\"token punctuation\">(</span><span class=\"token string\">\"deck\"</span><span class=\"token punctuation\">,</span> deck<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1.</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> envir<span class=\"token operator\">=</span>globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ncard\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> <span class=\"token number\">0x7f9a813e0698</span><span class=\"token operator\">></span>\n<span class=\"token operator\">></span> shuffle\n<span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\nrandom <span class=\"token operator\">&lt;-</span> sample<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">52</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span><span class=\"token number\">52</span><span class=\"token punctuation\">)</span>\nassign<span class=\"token punctuation\">(</span><span class=\"token string\">\"deck\"</span><span class=\"token punctuation\">,</span> DECK<span class=\"token punctuation\">[</span>random<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> envir<span class=\"token operator\">=</span> globalenv<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>environment<span class=\"token operator\">:</span> <span class=\"token number\">0x7f9a813e0698</span><span class=\"token operator\">></span>\n<span class=\"token operator\">></span> </code></pre></div>\n<p>This is some cool environment stuff. An environment captures itâ€™s parameters and everything above it. R also has closures which can capture their environment as well. From their we can assign things from inside the environment to objects outside, and when we use a function like <strong>shuffle</strong>, it will affect <strong>deal</strong>. Well that wraps up this chapter. Next part is a new project about slot machines. Iâ€™m glad the language has closures, even though a lot of parts about enviroments are stupid (namely constantly changing environments).</p>"}